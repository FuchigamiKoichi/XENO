<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>XENO - ゲーム</title>
  <link rel="stylesheet" href="./styles/game.css" />
</head>
<body>
  <div class="game-layout">
    <!-- 左側広告領域 -->
    <div class="left-ad-area">
      <div class="ad-placeholder">
        <p>広告エリア</p>
      </div>
    </div>
    
    <!-- メインゲーム画面 -->
    <div class="game-screen" id="gameScreen" style="display:flex;">
      <!-- ログトグルボタン -->
      <button id="log-toggle" class="log-toggle-btn">📝</button>
      
      <!-- 左カラム（ログ） -->
      <div id="left-column">
        <div id="log-area">
          <div class="log-header">
            <h3>ログ</h3>
            <button id="log-close" class="log-close-btn">&times;</button>
          </div>
          <div id="log-messages"></div>
        </div>
      </div>

      <!-- メニューバー -->
      <nav id="menuBar" aria-label="ゲームメニュー">
        <button id="menuToggle" class="menu-toggle" aria-expanded="false" aria-controls="menuList" aria-label="メニューを開く">
          <!-- シンプルなハンバーガー -->
          <span class="menu-icon" aria-hidden="true"></span>
        </button>

        <div id="menuList" class="menu-list" role="menu">
          <button id="backToTitle" role="menuitem" type="button" class="menu-item">タイトル画面に戻る</button>
          <button id="surrenderButton" role="menuitem" type="button" class="menu-item">投降する</button>
          <button id="ruleButton" role="menuitem" type="button" class="menu-item">ルール説明</button>
        </div>
      </nav>

      <!-- ゲーム要素のコンテナ -->
      <div class="game-content">
        <div id="turn-timer-container">
          <div id="turn-timer-bar"></div>
        </div>

        <!-- 待機中の部屋ID表示 -->
        <div id="waiting-info">
          <p>対戦相手を待っています...</p>
          <p id="room-id-display"></p>
          <button id="copy-room-id-btn">部屋IDをコピー</button>
          <p>このIDを参加者に伝えてください。</p>
          <button id="select-cpu-btn">CPUと対戦</button>
        </div>

        <h2>対戦画面</h2>

        <div id="select-container"></div>
    <div id="show-container"></div>
    <div id="showResult"></div>

    <!-- 相手の中央エリア -->
    <div id="opponent-center-area">
      <div id="opponent-playArea">相手のプレイエリア</div>
      <div id="opponent-hand" class="hand-zone"></div>
    </div>

    <!-- 使用済みカード モーダル -->
    <div id="usedCardsModal" class="modal">
      <div class="modal-content">
        <span class="close-btn" onclick="closeUsedCards()">&times;</span>
        <h2>使用済みカード</h2>
        <div id="usedCardsList"></div>
      </div>
    </div>
    <!-- ルール説明 モーダル -->
    <div id="ruleModal" style="display:none;">
      <div class="modal-content">
        <span id="closeRule" class="close-btn" style="cursor:pointer;position: absolute; top: 20px; right: 80px; font-size: 40px;">&times;</span>
        <!-- ここにrule.htmlの内容が動的に挿入されます -->
      </div>
    </div>

    <!-- 山札とプレイエリア -->
    <div id="deck-container">
      <div id="deck-count">残り枚数:17</div>
      <div id="side-card-container"></div>
    </div>

    <div id="center-area">
      <div id="player-hand" class="hand-zone"></div>
      <div id="playArea">プレイエリア</div>
    </div>

    <div id="turnIndicator">あなたのターンです</div>
    <div id="second_turn">相手のターンです</div>

    <!-- カード拡大表示 -->
        <!-- カード拡大表示 -->
        <div id="cardZoom">
          <img id="zoomedCard" src="" alt="拡大カード" />
          <div id="effectDescription" class="effect-text"></div>
        </div>
      </div>
    </div>
    
    <!-- 右側広告領域 -->
    <div class="right-ad-area">
      <div class="ad-placeholder">
        <p>広告エリア</p>
      </div>
    </div>
  </div>

  <!-- カード説明ツールチップ -->
  <div id="card-tooltip" class="card-tooltip">
    <div class="tooltip-header">
      <span id="tooltip-card-name"></span>
      <span id="tooltip-card-number"></span>
    </div>
    <div id="tooltip-card-effect" class="tooltip-effect"></div>
  </div>

  <!-- GSAP（CDN）→ socket.io → messages → ゲームJS の順 -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script src="./js/messages.js"></script>
  <script src="./js/animation.js"></script>
  <script defer src="./js/game.js"></script>
</body>
</html>