<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>HΛLPΛL - ゲーム画面</title>
  
  <!-- SEO Meta Tags -->
  <meta name="description" content="HΛLPΛL カードゲームのリアルタイム対戦画面。戦略的なカードプレイで相手を倒そう！">
  <meta name="keywords" content="HΛLPΛL, HALPAL, カードゲーム, ゲーム画面, リアルタイム対戦">
  <meta name="robots" content="noindex, nofollow">
  
  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="HΛLPΛL - ゲーム画面">
  <meta property="og:description" content="HΛLPΛL カードゲームのリアルタイム対戦中">
  <meta property="og:type" content="website">
  
  <!-- PWA Support -->
  <meta name="theme-color" content="#2c3e50">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  
  <!-- Performance Optimization -->
  <link rel="preload" href="./styles/game.css" as="style">
  <link rel="preload" href="./js/game.js" as="script">
  <link rel="preload" href="./js/animation.js" as="script">
  
  <!-- Favicon and Icons -->
  <link rel="icon" href="/favicon.ico" sizes="32x32">
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="stylesheet" href="./styles/game.css" />
</head>
<body>
  <div class="game-layout">
    <!-- 左側広告領域 -->
    <div class="left-ad-area">
      <div class="ad-placeholder">
        <p>広告エリア</p>
      </div>
    </div>
    
    <!-- メインゲーム画面 -->
    <div class="game-screen" id="gameScreen" style="display:flex;">
      <!-- ログトグルボタン -->
      <button id="log-toggle" class="log-toggle-btn">📝</button>
      
      <!-- 左カラム（ログ） -->
      <div id="left-column">
        <div id="log-area">
          <div class="log-header">
            <h3>ログ</h3>
            <button id="log-close" class="log-close-btn">&times;</button>
          </div>
          <div id="log-messages"></div>
        </div>
      </div>

      <!-- メニューバー -->
      <nav id="menuBar" aria-label="ゲームメニュー">
        <button id="menuToggle" class="menu-toggle" aria-expanded="false" aria-controls="menuList" aria-label="メニューを開く">
          <!-- シンプルなハンバーガー -->
          <span class="menu-icon" aria-hidden="true"></span>
        </button>

        <div id="menuList" class="menu-list" role="menu">
          <button id="backToTitle" role="menuitem" type="button" class="menu-item">タイトル画面に戻る</button>
          <button id="surrenderButton" role="menuitem" type="button" class="menu-item">投降する</button>
          <button id="ruleButton" role="menuitem" type="button" class="menu-item">ルール説明</button>
          <button id="audioSettingsButton" role="menuitem" type="button" class="menu-item">音量設定</button>
          <a href="https://forms.gle/6uXvhMgtQeWsyS5n8" target="_blank" rel="noopener noreferrer" role="menuitem" class="menu-item menu-link">お問い合わせ</a>
        </div>
      </nav>

      <!-- ゲーム要素のコンテナ -->
      <div class="game-content">
        <div id="turn-timer-container">
          <div id="turn-timer-bar"></div>
        </div>

        <!-- 待機中の部屋ID表示 -->
        <div id="waiting-info">
          <p>対戦相手を待っています...</p>
          <p id="room-id-display"></p>
          <button id="copy-room-id-btn">部屋IDをコピー</button>
          <p>このIDを参加者に伝えてください。</p>
          <button id="select-cpu-btn">CPUと対戦</button>
        </div>

        <h2>対戦画面</h2>

        <div id="select-container"></div>
    <div id="show-container"></div>
    <div id="showResult"></div>

    <!-- 相手の中央エリア -->
    <div id="opponent-center-area">
      <div id="opponent-playArea">相手のプレイエリア</div>
      <div id="opponent-hand" class="hand-zone"></div>
    </div>

    <!-- 使用済みカード モーダル -->
    <div id="usedCardsModal" class="modal">
      <div class="modal-content">
        <span class="close-btn" onclick="closeUsedCards()">&times;</span>
        <h2>使用済みカード</h2>
        <div id="usedCardsList"></div>
      </div>
    </div>
    <!-- ルール説明 モーダル -->
    <div id="ruleModal" style="display:none;">
      <div class="modal-content">
        <span id="closeRule" class="close-btn" style="cursor:pointer;position: absolute; top: 20px; right: 80px; font-size: 40px;">&times;</span>
        <!-- ここにrule.htmlの内容が動的に挿入されます -->
      </div>
    </div>

    <!-- 山札とプレイエリア -->
    <div id="deck-container">
      <div id="deck-count">残り枚数:17</div>
      <div id="side-card-container"></div>
    </div>

    <div id="center-area">
      <div id="player-hand" class="hand-zone"></div>
      <div id="playArea">プレイエリア</div>
    </div>

    <div id="turnIndicator">あなたのターンです</div>
    <div id="second_turn">相手のターンです</div>

    <!-- カード拡大表示 -->
        <!-- カード拡大表示 -->
        <div id="cardZoom">
          <img id="zoomedCard" src="" alt="拡大カード" />
          <div id="effectDescription" class="effect-text"></div>
        </div>
      </div>
    </div>
    
    <!-- 右側広告領域 -->
    <div class="right-ad-area">
      <div class="ad-placeholder">
        <p>広告エリア</p>
      </div>
    </div>
  </div>

  <!-- カード説明ツールチップ -->
  <div id="card-tooltip" class="card-tooltip">
    <div class="tooltip-header">
      <span id="tooltip-card-name"></span>
      <span id="tooltip-card-number"></span>
    </div>
    <div id="tooltip-card-effect" class="tooltip-effect"></div>
  </div>

  <!-- 音量設定モーダル -->
  <div id="audioModal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeAudio">&times;</span>
      <h2>音量設定</h2>
      <div class="audio-controls">
        <div class="volume-control">
          <label for="bgmVolume">BGM音量:</label>
          <input type="range" id="bgmVolume" min="0" max="100" value="30">
          <span id="bgmVolumeValue">30%</span>
        </div>
        <div class="volume-control">
          <label for="seVolume">SE音量:</label>
          <input type="range" id="seVolume" min="0" max="100" value="70">
          <span id="seVolumeValue">70%</span>
        </div>
        <div class="volume-control">
          <label for="muteToggle">
            <input type="checkbox" id="muteToggle">
            全体ミュート
          </label>
        </div>
        
        <!-- 音量リセット -->
        <div class="reset-section">
          <button id="resetToDefaults" class="reset-button">音量をデフォルトに戻す</button>
        </div>
        
        <button id="testSE" class="test-button">全般SE テスト</button>
      </div>
    </div>
  </div>

  <!-- GSAP（CDN）→ socket.io → messages → audio → animation → socketHandlers → ゲームJS の順 -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script src="./js/messages.js"></script>
  <script src="./js/audio.js"></script>
  <script src="./js/animation.js"></script>
  <script src="./js/socketHandlers.js"></script>
  <script defer src="./js/game.js"></script>
</body>
</html>